var utvFrontend={};utvFrontend.initialize=function(a){utvFrontend.setupObjects(a),utvFrontend.setupEvents(a)},utvFrontend.setupEvents=function(a){a(function(){var b=a(".utv-container"),c=a(".utv-panel");a.each(b,function(a,b){utvFrontend.memory.galleries.push(new utvFrontend.Gallery(b))}),a.each(c,function(a,b){utvFrontend.memory.panels.push(new utvFrontend.Panel(b))})})},utvFrontend.setupObjects=function(a){this.memory={galleries:new Array,panels:new Array,thumbwidth:parseInt(utvJSData.thumbnailWidth),thumbpadding:parseInt(utvJSData.thumbnailPadding)},this.Gallery=function(b){this.outercontainer=b,this.innercontainer=a(this.outercontainer).find(".utv-inner-wrapper"),this.setGalleryFlow=function(){var b=a(this.outercontainer).width(),c=Math.floor(b/(utvFrontend.memory.thumbwidth+2*utvFrontend.memory.thumbpadding)),d=(utvFrontend.memory.thumbwidth+2*utvFrontend.memory.thumbpadding)*c;a(this.innercontainer).css("width",d+"px"),a(this.outercontainer).removeClass("utv-invis")},this.setGalleryFlow(),a(window).resize({classRoot:this},function(a){a.data.classRoot.setGalleryFlow()}),a(this.outercontainer).on("click","a.utv-popup",function(){var b=a(this).attr("href"),c=a(this).attr("title");return a.magnificPopup.open({items:{src:b},type:"iframe",iframe:{patterns:new Array,markup:'<div class="utv-mfp-iframe-scaler mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" width="'+utvJSData.playerWidth+'" height="'+utvJSData.playerHeight+'" allowfullscreen></iframe></div><div class="utv-mfp-bottom-bar"><div class="mfp-title"></div></div>'},key:"utvid",callbacks:{open:function(){a(".mfp-content").css("maxWidth",utvJSData.playerWidth+"px"),a(".mfp-title").text(c);var b=a(".mfp-bg");b.css("background",utvJSData.lightboxOverlayColor),b.css("opacity",utvJSData.lightboxOverlayOpacity)}}}),!1})},this.Panel=function(b){this.outercontainer=b,this.innercontainer=a(this.outercontainer).find(".utv-inner-wrapper"),this.panelTitle=a(this.outercontainer).find(".utv-video-panel-title"),this.panelPlayer=a(this.outercontainer).find(".utv-video-panel-iframe"),this.panelVideos=a(this.innercontainer).find(".utv-thumb"),this.pagingContainer=a(this.innercontainer).find(".utv-video-panel-paging"),this.pagingHandles=a(this.pagingContainer).find(".utv-panel-paging-handle"),this.backArrow=a(this.outercontainer).find(".utv-video-panel-bkarrow"),this.forwardArrow=a(this.outercontainer).find(".utv-video-panel-fwarrow"),this.panelVideoCount=parseInt(a(this.outercontainer).data("panel-video-count")),this.totalPages=Math.ceil(this.panelVideos.length/this.panelVideoCount),this.visibleControls=a(this.outercontainer).data("visibleControls"),this.currentPage=1,this.setPanelFlow=function(){var b=a(this.outercontainer).width(),c=Math.floor(b/(utvFrontend.memory.thumbwidth+2*utvFrontend.memory.thumbpadding)),d=(utvFrontend.memory.thumbwidth+2*utvFrontend.memory.thumbpadding)*c;a(this.innercontainer).css("width",d+"px"),a(this.outercontainer).removeClass("utv-invis")},this.showHidePanelVideos=function(b){var c=b+this.panelVideoCount-1;a.each(this.panelVideos,function(d,e){d<b||d>c?a(e).addClass("utv-hide"):a(e).removeClass("utv-hide")})},this.changePanelVideo=function(b){var c=b.data("type"),d=b.data("id"),e=b.data("name"),f=b.data("index"),g=b.data("stime"),h=b.data("etime"),i="";"youtube"==c?i="https://www.youtube.com/embed/"+d+"?modestbranding=1&rel=0&showinfo=0&autohide=1&controls="+(1==this.visibleControls?"1":"0")+"&theme="+utvJSData.playerControlTheme+"&color="+utvJSData.playerProgressColor+"&autoplay=1&iv_load_policy=3&start="+g+"&end="+h:"vimeo"==c&&(i="https://player.vimeo.com/video/"+d+"?autoplay=1&autopause=0&title=0&portrait=0&byline=0&badge=0#t="+g),a(this.panelPlayer).attr("src",i),a(this.panelTitle).text(e);var j=Math.floor(f/this.panelVideoCount)+1;if(j!=this.currentPage){a(this.pagingHandles).removeClass("utv-panel-paging-active"),a.each(a(this.pagingHandles),function(b,c){a(c).text()==j&&a(c).addClass("utv-panel-paging-active")}),this.currentPage=j;var k=(j-1)*this.panelVideoCount;this.showHidePanelVideos(k)}},this.setPanelFlow(),this.showHidePanelVideos(0),a(window).resize({classRoot:this},function(a){a.data.classRoot.setPanelFlow()}),a(this.innercontainer).on("click",".utv-thumb",{classRoot:this},function(b){var c=a(this);a(b.data.classRoot.panelVideos).removeClass("utv-panel-video-active"),c.addClass("utv-panel-video-active"),b.data.classRoot.changePanelVideo(c)}),this.pagingContainer.on("click",".utv-panel-paging-handle",{classRoot:this},function(b){var c=a(this),d=(parseInt(c.text())-1)*b.data.classRoot.panelVideoCount;b.data.classRoot.currentPage=c.text(),b.data.classRoot.showHidePanelVideos(d),a(b.data.classRoot.pagingContainer).find(".utv-panel-paging-handle").removeClass("utv-panel-paging-active"),c.addClass("utv-panel-paging-active")}),a(this.backArrow).click({classRoot:this},function(b){var c=a(b.data.classRoot.panelVideos).filter(".utv-panel-video-active"),d=a(c).prev();d.length>0&&(c.removeClass("utv-panel-video-active"),d.addClass("utv-panel-video-active"),b.data.classRoot.changePanelVideo(d))}),a(this.forwardArrow).click({classRoot:this},function(b){var c=a(b.data.classRoot.panelVideos).filter(".utv-panel-video-active"),d=a(c).next();d.length>0&&(c.removeClass("utv-panel-video-active"),d.addClass("utv-panel-video-active"),b.data.classRoot.changePanelVideo(d))})}},function(a){utvFrontend.initialize(a)}(jQuery);
